const merge = require('webpack-merge');const webpack = require('webpack');const baseConfig = require('./webpack.base.config');const config = require('./config')[process.env.NODE_ENV];const nodeExternals = require('webpack-node-externals');const { resolve } = require('./utils');module.exports = merge(baseConfig(config), {  target: 'node',  devtool: config.devtool,  mode: config.env,  entry: resolve('src/server-entry.js'),  output: {    filename: 'server-bundle.js',    libraryTarget: 'commonjs2',    publicPath: '/',    chunkFilename: config.noHash ? '[name].js' : 'js/[name].[chunkhash].js'  },  // 服务端打包的时候忽略外部的npm包  externals: nodeExternals({    // 当然外部的css还是可以打进来的    whitelist: /\.(css|less|scss)$/  }),  plugins: [    new webpack.DefinePlugin({      'process.env.NODE_ENV': JSON.stringify(config.env),      'process.env.VUE_ENV': '"server"'    })  ]});