const { renderToString } = require('react-dom/server');const serialize = require('serialize-javascript');const ejs = require('ejs');// function templating(template) {//   return props => template.replace(/<!--([\s\S]*?)-->/g, (_, key) => props[key.trim()]);// }module.exports = async function(ctx, serverBundle, template) {  try {    // const render = templating(template);    const jsx = await serverBundle(ctx);    const appString = renderToString(jsx);    ctx.body = ejs.render(template, {      initialStore: serialize(ctx.store.getState()),      appString      // title: seo.title ? `<title>${seo.title}</title>` : '',      // meta: seo.description ? `<meta name="description" content="${seo.description}">` : ''    });    // const body = render({    //   html,    //   store: `<script>window.__STORE__ = ${JSON.stringify(ctx.store.getState())}</script>`    // });    // ctx.body = body;    ctx.type = 'text/html';  } catch (err) {    console.error(err.message);    ctx.body = err.message;    ctx.type = 'text/html';  }};